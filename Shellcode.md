# SHELLCODE

Piece of code performs specific action

Written in ASM

Shellcode is architecture specific, so it is non portable between different processor types

Shellcode is typically written to directly manipulate processor registers to set them up for various system calls made with opcodes

When the ASM code has been written to perform the operation desired, it must then be converted to machine code and freed of any "null bytes" , because it must be free of any null bytes because many string operators such as strcpy() terminate when hitting them

-----

## SYSTEM CALLS (SYSCALL)

System call (commonly abbreviated to syscall) is the programmatic way in which a computer program requests a service from the kernel of the operating system on which it is executed

System calls provide an essential interface between a process and the operating system

System calls can only be made from userspace processes

Privileged system code also issues system calls

 An interrupt automatically puts the CPU into some elevated privilege level and then passes control to the kernel, which determines whether the calling program should be granted the requested service. If the service is granted, the kernel executes a specific set of instructions over which the calling program has no direct control, returns the privilege level to that of the calling program, and then returns control to the calling program.

System calls provide a way to manage communication to hardware and functionality offered by the kernel that may not be included in the application's address space

Most systems use ring levels(commonly 4 privileged levels) to provide security and protection from allowing an application to directly access hardware and certain system functions

For a user-level program to access a function outside of its address space, such as setuid(), it must identify the system call number of the desired function and then send an interrupt 0x80 (int 0x80)

#### NOTE
	The instruction int 0x80 is an assembly instruction that invokes system calls on most *NIX OSs

To perform a syscall , two or more arguments are required

The "syscall number" is loaded into "EAX register"

Arguments needed to be passed through syscall are stored in registers EBX,ECX and EDX(32bit) in the order followed by syscall table

In case of 64bit, QWORD registers and R8-R15 registers are used to store the arguments

### GENERATING A SAMPLE ASM CODE FOR SYSCALL

Lets trigger the exit(0) using syscall by ASM

```
mov eax,1
mov ebx,0
int 0x80
```

Here EAX is loaded with 1, so it get the syscall with value 1

syscall_value = 1 -----> syscall = sys_exit()

The value 0 is loaded into EBX so that it can be used as argument for syscall

int 0x80 is used to trigger interrupt and perform syscall

### MORE ON SYSCALL

Type this command in terminal

```
man syscall
man 'syscall(2)'
```

Also refer this [table](https://chromium.googlesource.com/chromiumos/docs/+/master/constants/syscalls.md) for more syscall values







